<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Rentify – Student housing made easy." />
    <meta
      name="keywords"
      content="rental, accommodation, FUT Minna, landlord"
    />
    <meta name="author" content="Rentify Team" />
    <link href="../css/output.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="icon" type="image/png" href="../assets/images/Frame.svg" />
    <!-- Redirect if not authenticated -->
    <script>
      if (!localStorage.getItem("token")) {
        window.location.href = "./login.html";
      }
    </script>
    <style>
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
    <title>Apartment-Rentify</title>
  </head>

  <body class="font-chubbo [#FAF0F6]">
    <!-- Blur overlay -->
    <div
      id="loadingOverlay"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(4px);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      "
    >
      <div
        class="spinner"
        style="
          width: 40px;
          height: 40px;
          border: 4px solid #ccc;
          border-top-color: #333;
          border-radius: 50%;
          animation: spin 0.6s linear infinite;
        "
      ></div>
    </div>

    <div
      class="content-wrapper max-w-[425px] mx-auto bg-[#FAF9F6] w-full md:my-[10px] md:rounded-xl min-h-screen"
    >
      <!-- Carousel -->
      <div id="carousel" class="relative w-full h-[350px]">
        <button onclick="history.back()" class="back-button-advanced">
          <div class="arrow-container">
            <div class="arrow-line"></div>
            <div class="arrow-head"></div>
          </div>
        </button>
        <img
          id="lodgeImg"
          alt="House Image"
          class="w-full h-[350px] object-cover transition-opacity duration-300"
          src=""
        />
        <button
          id="prevBtn"
          type="button"
          class="absolute left-2 top-1/2 -translate-y-1/2 bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100"
        >
          <i class="fa fa-chevron-left text-white text-[30px]"></i>
        </button>
        <button
          id="nextBtn"
          type="button"
          class="absolute right-2 top-1/2 -translate-y-1/2 bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100"
        >
          <i class="fa fa-chevron-right text-white text-[30px]"></i>
        </button>
        <div
          id="carouselDots"
          class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2"
        ></div>
      </div>

      <main class="px-[30px] pb-[25px]">
        <div class="flex justify-between pt-[20px]">
          <span class="font-[500] text-[24px]" id="lodgeTitle"></span>
          <span id="heart"></span>
        </div>
        <p
          class="text-[14px] border-b-1 border-black py-[10px]"
          id="lodgeAddress"
        ></p>

        <div class="flex border-b-1 border-black py-[10px]">
          <img
            id="hostImg"
            alt="Host"
            class="w-[60px] h-[60px] rounded-full object-cover mr-[10px] cursor-pointer"
          />

          <div class="flex flex-col self-center">
            <span id="lodgeHost"></span>
            <span class="text-[14px]" id="hostStatus" class="verify"></span>
          </div>
        </div>
        <!-- Error Container -->
        <div
          id="errorContainer"
          class="hidden mb-4 p-3 bg-red-100 border-l-4 border-red-500 text-red-700"
        >
          <p id="errorMessage"></p>
        </div>
        <!-- Modal for Enlarged Image -->
        <div
          id="imageModal"
          class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"
        >
          <img
            id="enlargedImage"
            src=""
            alt="Enlarged Profile"
            class="max-w-[90%] max-h-[90%] shadow-lg"
          />
        </div>
        <p
          id="lodgeDescription"
          class="border-b-1 border-black py-[10px] text-[12px]"
        ></p>

        <div
          id="reviewSection"
          class="flex overflow-x-auto h-[130px] space-x-2"
        ></div>
        <!-- Review Input Box -->
        <div class="mt-4 px-[5px]">
          <h2 class="text-[16px] font-semibold mb-2">Leave a Review</h2>
          <textarea
            id="reviewText"
            class="w-full h-[80px] border border-gray-300 rounded-lg p-2 text-[14px] resize-none"
            placeholder="Write your review here..."
          ></textarea>
          <button
            id="submitReview"
            class="mt-2 bg-[#EC704A] text-white px-4 py-2 rounded-lg text-[14px] hover:bg-[#d45f3a] transition-colors duration-200"
          >
            Submit Review
          </button>
        </div>
      </main>

      <footer
        class="py-2 mx-auto sticky bottom-0 bg-[#FAF9F6] flex justify-between px-[30px] border-t-1 border-[#00000040]"
      >
        <div>
          <span id="price" class="text-[18px]">₦0</span>
        </div>
        <button
          id="contactHostBtn"
          class="bg-[#EC704A] text-white px-4 py-2 rounded-lg mt-2 font-400"
        >
          Contact Host
        </button>
      </footer>
    </div>
    <script type="module" src="../js/apartment.js"></script>
  </body>
</html>
